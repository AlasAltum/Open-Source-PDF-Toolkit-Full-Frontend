<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Merger & Creator - Privacy-First PDF Tool</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔗 PDF Tool</h1>
            <p>Merge multiple PDF files or process a single PDF. All operations are done completely in your browser for privacy.</p>
            <div class="privacy-info">
                <div class="privacy-badge">
                    <span class="privacy-badge-main">100% Client-Side Processing</span>
                    <span class="privacy-badge-explanation">Your data is private and not being uploaded to any cloud.</span>
                </div>
            </div>
        </div>

        <div class="upload-section">
            <div class="drop-zone" id="dropZone">
                <div class="drop-zone-content">
                    <span class="upload-icon">📄</span>
                    <h3>Drop PDF files here</h3>
                    <p>or click to browse and select files</p>
                    <button class="upload-btn" id="browseBtn">
                        Choose PDF Files
                    </button>
                </div>
            </div>
            <input type="file" id="fileInput" class="file-input" multiple accept=".pdf">

            <div class="file-list" id="fileList">
                </div>

            <div class="action-section">
                <button class="action-btn" id="processActionBtn" disabled>
                    🚀 Merge PDFs
                </button>
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <span id="loadingText">Processing your PDFs...</span>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature">
                <span class="feature-icon">🔒</span>
                <h3>Privacy First</h3>
                <p>All processing happens in your browser. Your files never leave your device.</p>
            </div>
            <div class="feature">
                <span class="feature-icon">⚡</span>
                <h3>Lightning Fast</h3>
                <p>No server delays. Process your PDFs instantly with JavaScript performance.</p>
            </div>
            <div class="feature">
                <span class="feature-icon">✏️</span>
                <h3>Edit &amp; Organize</h3>
                <p>Reorder, rotate, crop, and more before finalizing your document.</p>
            </div>
        </div>
    </div>

    <div class="modal" id="pdfEditorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📝 PDF Editor</h2>
                <button class="close-btn" id="closeEditorBtn">✕</button>
            </div>
            <div class="editor-toolbar">
                <button class="tool-btn" id="rotateLeftBtn">↶ Rotate Left</button>
                <button class="tool-btn" id="rotateRightBtn">↷ Rotate Right</button>
                <button class="tool-btn" id="compressBtn">🗜️ Compress</button>
                <button class="tool-btn" id="cropBtn">✂️ Crop Pages</button>
                <button class="tool-btn" id="removeCommentsBtn">💬 Remove Comments</button>
                <button class="tool-btn" id="removeMetadataBtn">🧹 Remove Metadata</button>
                <button class="tool-btn danger" id="deletePageBtn">🗑️ Delete Page</button>
            </div>
            <div class="pdf-viewer">
                <div class="page-controls">
                    <button id="prevPageBtn">← Previous</button>
                    <span id="pageInfo">Page 1 of 1</span>
                    <button id="nextPageBtn">Next →</button>
                </div>
                <canvas id="pdfCanvas"></canvas>
                <div class="crop-controls" id="cropControlsContainer" style="display: none;">
                    <h4>Crop Settings (pixels from edge):</h4>
                    <div class="crop-inputs">
                        <label>Top: <input type="number" id="cropTop" value="0" min="0"></label>
                        <label>Bottom: <input type="number" id="cropBottom" value="0" min="0"></label>
                        <label>Left: <input type="number" id="cropLeft" value="0" min="0"></label>
                        <label>Right: <input type="number" id="cropRight" value="0" min="0"></label>
                    </div>
                    <button class="apply-btn" id="applyCropBtn">Apply Crop</button>
                    <button class="cancel-btn" id="cancelCropBtn">Cancel</button>
                </div>
            </div>
            <div class="editor-actions">
                <button class="action-btn-modal save-btn" id="savePdfChangesBtn">💾 Save Changes</button>
                <button class="action-btn-modal cancel-btn" id="cancelEditorBtn">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal" id="confirmationModal">
        <div class="modal-content confirm-dialog">
            <div class="modal-header">
                <h2 id="confirmationTitle">Confirm Action</h2>
                 <button class="close-btn" id="closeConfirmModalBtn">✕</button>
            </div>
            <div style="padding: 30px 20px; text-align: center;">
                <p id="confirmationMessage" style="font-size: 1.1em; line-height: 1.6; color: #333;">Are you sure?</p>
            </div>
            <div class="confirm-actions">
                <button class="action-btn-modal save-btn" id="confirmYesBtn">Yes</button>
                <button class="action-btn-modal cancel-btn" id="confirmNoBtn">No</button>
            </div>
        </div>
    </div>

    <div id="notificationArea"></div>

    <script src="script.js"></script>
</body>
</html>